# volumes:
#   cargo-cache:

postgres:
  image: healthcheck/postgres:alpine

graphql:
  build: 
    context: api
    dockerfile: Dockerfile.graphql.ci
  depends_on:
    - postgres
  cached: true
  environment:
    API_SECRET: abc
    CLIENT_HOST: client
    APP_ENV: test
    DATABASE_NAME_TEST: postgres
    DATABASE_HOST_TEST: x
    DATABASE_USER_TEST: postgres
    DATABASE_PASS_TEST: x
    SYSTEM_JWT: abc
  volumes:
    - cargo-cache:/root/.cargo
  
mail:
  build:
    context: api
    dockerfile: Dockerfile.mail.ci
  cached: true
  environment:
    SYSTEM_EMAIL: hello@sample.com
  volumes:
    - cargo-cache:/root/.cargo
