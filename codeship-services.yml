# volumes:
#   cargo-cache:

postgres:
  image: healthcheck/postgres:alpine

api:
  build: 
    context: api
    dockerfile: Dockerfile.ci
  depends_on:
    - postgres
  cached: true
  environment:
    API_SECRET: abc
    CLIENT_HOST: client
    APP_ENV: test
    DATABASE_NAME_TEST: postgres
    DATABASE_HOST_TEST: x
    DATABASE_USER_TEST: postgres
    DATABASE_PASS_TEST: x
    SYSTEM_JWT: abc
  volumes:
    - cargo-cache:/root/.cargo

client:
  build:
    context: client
    dockerfile: Dockerfile.ci
  cached: true
