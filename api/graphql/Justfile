dp-setup:
	DATABASE_URL=$DATABASE_URL_LOCAL diesel setup

db-gen name:
	diesel migration generate {{name}}

db-up:
	DATABASE_URL=$DATABASE_URL_LOCAL diesel migration run

db-down:
	DATABASE_URL=$DATABASE_URL_LOCAL diesel migration revert

dp-test-setup:
	DATABASE_URL=$DATABASE_URL_TEST diesel setup

db-test-down:
	DATABASE_URL=$DATABASE_URL_TEST diesel migration revert

db-test-up:
	DATABASE_URL=$DATABASE_URL_TEST diesel migration run

schema:
	DATABASE_URL=$DATABASE_URL_LOCAL diesel print-schema > src/models/schema.rs

test:
	APP_ENV=test cargo test
