DeployTo root@51.15.65.131

# The path where we deploy applications.
#
Set BIN "/app"

# Ensure we have a destination directory
#
Run "mkdir -p /app >/dev/null"

CopyFile ./dist/bin/api.exe /app/api.exe

# Ensure the downloaded files are executable.
#
Run "chmod 755 ${BIN}/*"

# Finally we need to make sure there are systemd unit-files in-place,
# for handling the parsing/polling.
#
CopyTemplate ./support/server/lib/systemd/system/api.service /lib/systemd/system/api.service
IfChanged "systemctl daemon-reload"
IfChanged "systemctl enable api.service"

# Stop + Start the services
#
Run "systemctl stop  api.service"
Run "systemctl start api.service"
Run "systemctl status api.service"
